<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"/>
    <title>Hiro + GLB</title>
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <style>
      html,body{margin:0;height:100%;background:#000;overflow:hidden}
      .hud{position:fixed;left:8px;bottom:8px;color:#fff;font:14px system-ui,sans-serif;
           background:rgba(0,0,0,.45);padding:6px 8px;border-radius:8px;z-index:3}
      .hidden{display:none}
    </style>
  </head>
  <body>
    <div id="hud" class="hud">Loading modelâ€¦</div>

    <a-scene
      embedded
      arjs="sourceType: webcam; debugUIEnabled: false;"
      renderer="antialias: true; logarithmicDepthBuffer: true"
    >
      <!-- Preload the model -->
      <a-assets timeout="60000" crossorigin="anonymous">
        <!-- TIP: replace @main with a commit SHA for stronger caching -->
        <a-asset-item
          id="city"
          src="https://cdn.jsdelivr.net/gh/AntonAnderssonMedia/Camera_HiroModel@main/nrkpg-model.glb">
        </a-asset-item>
      </a-assets>

      <!-- Simple light so materials look decent 
      <a-entity light="type: hemisphere; intensity: 1"></a-entity> -->

      <!-- Marker -->
      <a-marker preset="hiro" emitevents="true" id="marker">
        <a-entity id="model"
          gltf-model="#city"
          position="0 0 0"
          scale="2 2 2"
          visible="false"
          animation-mixer
        ></a-entity>
      </a-marker>

      <a-entity camera></a-entity>
    </a-scene>

    <script>
      const hud = document.getElementById('hud');
      const marker = document.getElementById('marker');
      const model = document.getElementById('model');

      // Hide HUD when model is ready
      model.addEventListener('model-loaded', () => {
        hud.textContent = 'Point at the Hiro marker';
      });

      // Show/hide model based on detection
      marker.addEventListener('markerFound', () => {
        model.setAttribute('visible', true);
      });
      marker.addEventListener('markerLost', () => {
        model.setAttribute('visible', false);
      });
    </script>
  </body>
</html>
